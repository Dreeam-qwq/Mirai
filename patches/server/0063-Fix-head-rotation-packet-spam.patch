From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: cswhite2000 <18whitechristop@gmail.com>
Date: Sun, 5 Aug 2018 15:00:46 -0700
Subject: [PATCH] Fix head rotation packet spam

Original code by Electroid, licensed under GPL v3
You can find the original code on https://github.com/Electroid/SportPaper

diff --git a/src/main/java/net/minecraft/server/level/ServerEntity.java b/src/main/java/net/minecraft/server/level/ServerEntity.java
index be355633331298ee60e07dc07f591982ed529c5a..2297a8d75ef843f32ec03621d7bc8576f9d841fc 100644
--- a/src/main/java/net/minecraft/server/level/ServerEntity.java
+++ b/src/main/java/net/minecraft/server/level/ServerEntity.java
@@ -371,8 +371,10 @@ public class ServerEntity {
         }
 
         // CraftBukkit start - Fix for nonsensical head yaw
-        this.yHeadRotp = Mth.floor(this.entity.getYHeadRot() * 256.0F / 360.0F);
-        sender.accept(new ClientboundRotateHeadPacket(this.entity, (byte) this.yHeadRotp));
+        if (this.entity instanceof LivingEntity) { // SportPaper - Fix head rotation packet spam
+            this.yHeadRotp = Mth.floor(this.entity.getYHeadRot() * 256.0F / 360.0F);
+            sender.accept(new ClientboundRotateHeadPacket(this.entity, (byte) this.yHeadRotp));
+        }
         // CraftBukkit end
 
         if (!this.entity.getPassengers().isEmpty()) {
